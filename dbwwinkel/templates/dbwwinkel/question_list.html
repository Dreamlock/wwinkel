{% extends 'base/base.html' %}
{% load static %}
{% load index %}

{% block extra_head %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="{% static "dbwwinkel/js/myjs.js" %}"></script>
    <script src="{% static "dbwwinkel/js/facet.js" %}"></script>
    <link rel ='stylesheet' href = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href = "https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" >

    <style>
        /* Center the loader */
        #loader {
            position: absolute;
            left: 50%;
            top: 50%;
            z-index: 1;
            width: 150px;
            height: 150px;
            margin: -75px 0 0 -75px;
            border: 16px solid #f3f3f3;
            border-radius: 50%;
            border-top: 16px solid #3498db;
            width: 120px;
            height: 120px;
            -webkit-animation: spin 2s linear infinite;
            animation: spin 2s linear infinite;
        }

        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }
            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* Add animation to "page content" */
        .animate-bottom {
            position: relative;
            -webkit-animation-name: animatebottom;
            -webkit-animation-duration: 1s;
            animation-name: animatebottom;
            animation-duration: 1s
        }

        @-webkit-keyframes animatebottom {
            from {
                bottom: -100px;
                opacity: 0
            }
            to {
                bottom: 0px;
                opacity: 1
            }
        }

        @keyframes animatebottom {
            from {
                bottom: -100px;
                opacity: 0
            }
            to {
                bottom: 0;
                opacity: 1
            }
        }

        #myDiv {
            display: none;
            text-align: center;
        }
    </style>

{% endblock %}
{% block body_loader %}
    <body onload="myFunction()" style="margin:0;">
{% endblock %}
{% block content %}

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-lg-2">
                <div class="sidebar-nav-fixed">
                    <div class="well">
                        <ul class="nav ">
                            <form name="form" action="{% url "list_questions" %}" method='GET' accept-charset="utf-8"
                                  id="form">
                                <strong>Gezocht op: {{ search_text }}</strong>
                                <input type="hidden" name="search_text" value="{{ search_text }}">
                                {% if user_type == 'student' %}
                                    {% include 'dbwwinkel/Options_question_list/options_students.html' %}
                                {% elif user_type == 'manager_user' %}
                                    {% include 'dbwwinkel/Options_question_list/options_admin.html' %}
                                {% endif %}
                            </form>
                        </ul>
                    </div>
                    <!--/.well -->
                </div>
                <!--/sidebar-nav-fixed -->
            </div>
            <!--/span-->
            <div id='loader'></div>
            <div style="display:none;" id="myDiv">
                <div class="col-md-9 col-lg-10">
                    <table id="example" class="table table-striped table-hover" cellspacing="0" width=" ='100%">
                        <thead>
                        <tr>
                            <th class='text-center'>Publicatie datum</th>
                            <th class='text-center'>Organisatie</th>
                            <th class='text-center'>Vraag</th>
                            <th class='text-center'>Status</th>
                            <th class='text-center'>Instelling</th>
                            <th class='text-center'>Opledingen</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for question in questions %}
                            <tr data-href="{% url 'detail_question' question.object.id %}"
                                class='table-row'
                                style="cursor:pointer;">
                                <td class='col-md-1'>{{ question.object.creation_date.date }}</td>
                                <td class='col-md-1'>{{ question.object.organisation_name }}</td>
                                <td class='col-md-6'>{{ question.object.question_text }}</td>
                                <td class='col-md-1'>{{ question.object.get_state_display }}</td>
                                <td class='col-md-1'>{% for inst in question.object.institution.all %}
                                    {{ inst.name }}{% endfor %}</td>
                                <td class='col-md-1'>{% for ed in question.object.education.all %}
                                    {{ ed }}{% endfor %}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block extra_scripts %}
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script sce="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
    <script>
            $(document).ready(function () {
            $('#example').DataTable( {
                "searching": false,
                "paging": false
            });

        });
        var myVar;

        function myFunction() {
            myVar = setTimeout(showPage, 1000);
        }

        function showPage() {
            document.getElementById("loader").style.display = "none";
            document.getElementById("myDiv").style.display = "block";
        }


    </script>

{% endblock %}